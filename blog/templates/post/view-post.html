{% extends 'base.html' %}
<!-- title -->
{% block title %}Flask Blog - Posts{% endblock %}


<!-- content block -->
{% block main %}

<div class="row my-1 justify-content-between">
  <div class="col-lg-10 col-md-12 col-sm-12 align-self-center">
    <h2>
      {{post.title}}
    </h2>
    <h4 class="text-muted">{{post.created_at.strftime('%B %d %Y at %H:%M')}} by <a class="text-dark"
        href="#">{{post.author.first_name}} {{post.author.last_name}}</a></h4>
    <h5>{% for tag in post.tags%}
      <span class="badge rounded-pill bg-dark text-light">{{tag}}</span>
      {%endfor%}
    </h5>
  </div>
  <div class="col-lg-2 col-md-12 col-sm-12 align-self-center">
    {% if post.published %}
    <h3>
      <span class="badge rounded-pill bg-success text-light">Published</span>
      <span class="badge rounded-pill bg-info text-light"><i class="fas fa-eye"></i> {{post.view_count}}</span>
    </h3>
    {% else %}
    <h3>
      <span class="badge rounded-pill bg-danger text-light">Draft</span>
    </h3>
    {% endif %}
  </div>
</div>

<div class="row justify-content-between">
  <div class="col-lg-12 col-md-12 col-sm-12 align-self-center">
    <hr>
    <p>{{post.content}}</p>
  </div>
</div>
<div class="row my-1 justify-content-between">
  <div class="col-lg-12 col-md-12 col-sm-12 align-self-center">
    <hr>
    {% if session['user'] %}
    {% if post.author.id | string() == session['user'].id | string() %}
    {% if not post.published %}
    <a href="{{url_for('post.publish_post', post_id = post.id)}}" class="card-link text-dark"> <i
        class="fas fa-arrow-alt-circle-up"></i> Publish Post</a>
    {% endif %}
    <a href="{{url_for('post.edit_post', post_id = post.id)}}" class="card-link text-dark"> <i
        class="fas fa-pen-square"></i> Edit Post</a>
    <a href="{{url_for('post.delete_post', post_id = post.id)}}" class="card-link text-dark"> <i
        class="fas fa-trash"></i> Delete Post</a>
    {% endif %}
    {% endif %}
  </div>
</div>
{% endblock %}