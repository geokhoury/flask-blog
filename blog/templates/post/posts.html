{% extends 'base.html' %}
<!-- title -->
{% block title %}{{title}}{% endblock %}


<!-- content block -->
{% block main %}

<!-- posts header -->
<div class="row my-5 justify-content-between">
  <div class="col-lg-4 col-md-6 col-sm-12">
    <h1>
      <i class="fas fa-asterisk"></i> {{title}}
    </h1>
  </div>
  {% if session['user'] %}
  <div class="col-lg-4 col-md-6 col-sm-12">
    <a class="btn btn-dark" href="{{url_for('post.add_post')}}"> <i class="fas fa-feather-alt"></i> Add Post</a>
  </div>
  {% endif %}
</div>

<div class="row">

  {% for post in posts %}
  <div class="col-lg-4 col-md-6 col-sm-12">

    <!-- post card -->
    <div class="card bg-light mb-3">

      <!-- card header -->
      <div class="card-header">
        <h5 class="card-title"><a class="text-dark" href="{{url_for('post.view_post', post_id = post.id)}}">{{ post['title'] }}</a></h5>
        <h6 class="card-subtitle">by <a class="text-muted" href="{{url_for('user.view_user', user_id = post.author.id)}}">{{
          post.author.first_name | title}} {{post.author.last_name | title}}</a></h6>
      </div>

      <!-- card body -->
      <div class="card-body">
        <p class="card-text text-dark">{{ post['content'] |truncate(200,false,'...') }}</p>
        <hr>
        <a href="{{url_for('post.view_post', post_id = post.id)}}" class="card-link text-dark"> <i class="fas fa-book-reader"></i> Read More</a>
        <a href="{{url_for('user.view_user', user_id = post.author.id)}}" class="card-link text-dark"> <i class="fas fa-feather-alt"></i> More by this author</a>
        {%if not post.published%}
        <a href="{{url_for('post.publish', post_id = post.id)}}" class="card-link text-dark"> <i class="fas fa-feather-alt"></i> Publish </a>
        {%endif%}
        {%if post.published%}
        <a href="{{url_for('post.publish', post_id = post.id)}}" class="card-link text-dark"> <i class="fas fa-feather-alt"></i> Draft </a>
        {%endif%}


      </div>
    </div>
  </div>
  {%endfor%}
</div>
{% endblock %}